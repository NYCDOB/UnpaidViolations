<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://nycdob.github.io/ActiveNB_A1enlargements/data/iconlogo.png">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nycdob/UnpaidViolations/css/unpaidvios.css">
<link  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<title>DOB Unpaid Violations Search</title>
<style>
</style>
</head>
<body>
<dialog class="_sInfo" tabindex="-1">
<form method="dialog">
<span  class="material-symbols-outlined pull-right closemodal ">Cancel</span>
<h1><img src="https://cdn.jsdelivr.net/gh/nycdob/UnpaidViolations/img/DOB-NOW-logo.png" alt="DOB Now">Unpaid DOB Violations (Civil Penalties)</h1>
<p>This site shows a <b>summary</b> of unpaid DOB Violations (Civil Penalties) per building and is updated nightly.</p>
<p>Note:  Some older violations and those in categories other than the below are not included.  Additionally,
<a href="https://www.nyc.gov/site/buildings/safety/oath-summonses.page" target="_blank">DOB Summonses</a> that are adjudicated by and payable to the Office of Administrative Trials & Hearings 
(OATH) are not included.</p>
<p style="color:red;">Unpaid violations may result in additional inspections, penalties, liens.  Open violations can also prevent an owner from selling or refinancing. Additionally, DOB may not issue Certificates of Occupancy or Letters of Completion when DOB violations re active.
Resolving and paying violations varies by violation type, for more details see:</p>
<ul>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/property-or-business-owner/aeuhaz.page">Administrative Enforcement (AEUHAZ) Violations</a></li>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/safety/resolve-dob-boiler-violations.page">Boiler Violations</a></li>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/safety/resolve-dob-elevator-violations.page">Elevator Violations</a></li>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/codes/benchmarking.page">Energy Benchmarking</a></li>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/codes/energy-audits-retro-commissioning-violations.page">Energy EER</a></li>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/property-or-business-owner/energy-grades.page">Energy Grades</a></li>
<li><a target="_blank" href="https://www.nyc.gov/site/buildings/safety/resolve-dob-fa%C3%A7ade-violations.page">Façade Violations</a></li>
</ul>
<p>Detailed information on all violations (both unpaid and resolved) can be found in the following systems:</p>
<ul>
<li><a target="_blank" href="https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp">Buildings Information System (BIS)</a> – enter address and then click on Violations-DOB (bottom left of Property Profile)</li>
<li><a target="_blank" href="https://a810-dobnow.nyc.gov/publish/Index.html#!/">DOB NOW</a> – click on the ‘Violations’ icon and enter address</li>
</ul>
<p>For other violation types, contact Customer Service via<a target="_blank" href="https://a810-efiling.nyc.gov/eRenewal/dobNowHelp.jsp">nyc.gov/dobhelp</a> or 212-393-2550</p>
<button class="btn-lg" autofocus>Close</button>
<div class="small nosplash">
<input type="checkbox" id="nosplash" name="nosplash">
<label for="nosplash">Do not show this splash screen again</label>
</div>
</form>
</dialog>
<div class="_main">
<div class="kl">
    <div>
    <a href="https://www.nyc.gov/site/buildings/index.page" target="_blank" class="active"><img alt="DOB Logo" src="https://cdn.jsdelivr.net/gh/nycdob/UnpaidViolations/img/dob_logo_white_transparent.png?raw=true" height="40" width="80"></a>
    </div>
    <div class="tle">DOB Violations</div>
    <div class="onlybig">Search Civil Penalties Owed for Property</div>
    <div class="showhelp onlybig">Help</div>
</div>	

    <div class="middlebox">
    <div class="_bl"> 
        <div class="maininput">
            <div class="_rad">
                <div>
                    <input class="_r" type="radio" id="addr" value="addr" name="proptype" checked>
                    <label for="addr">Address</label>
                </div>
                <div >
                    <input class="_r" type="radio" id="bin"  value="bin" name="proptype">
                    <label for="bin">BIN</label>
                </div>
            </div>
            <div class="inputblock">
                <input id="propInput" maxlength="99" minlength="3"  type="search" autofocus placeholder="e.g. 4 Edgewater Street Staten Island"/>
                <div class="selectordiv">
                    <ul class="divlist" tabindex="-1"></ul>
                </div>
            </div>
            <button title="Search" id="gobutton" class="btn btn-primary">Show</button>
        </div>
        <div class="datacontent">
        </div>
    </div>
    <div class="_br">
        <div> 
            <div>
                <b>IMPORTANT</b><br>
                <p>&bullet; Amounts due must be validated and confirmed by DOB Official Staff at the time of payment.</p>
                <p>&bullet; Paying the violation does not cure or remove the violation.</p>
                <p>&bullet; For more information, visit <a href="https://www.nyc.gov/site/buildings/industry/inspections-violations.page" target="_blank">Inspections & Violations</a> or call DOB at (212) 566-5000.</p>
            </div>
        </div> 
        <hr>
        <div class="_moredoblinks">
            <div>        
                <a href="https://a810-dobnow.nyc.gov/publish/Index.html#!" target="_blank">
                    <img class="lilicon" title="DOB NOW Portal" alt="DOB Now Portal" src="https://cdn.jsdelivr.net/gh/nycdob/UnpaidViolations/img/DOB-NOW-logo.png?raw=true" height="40">
                    <span>DOB Now</span>
                </a>
            </div>
            <div>        
                <a href="https://nyc.gov/bis" target="_blank">
                    <img class="lilicon" title="DOB BIS" alt="BIS Web" src="https://cdn.jsdelivr.net/gh/nycdob/UnpaidViolations/img/NYC-5boros.png?raw=true" height="40">
                    <span>Buildings Information System</span>
                </a>
            </div>
        </div>
    </div>
    </div>
    <div class="_foot">
    <div>Built by DOB <a target="_blank" class="genlink" href="https://www.nyc.gov/site/buildings/dob/analytics-reports.page">Dev Squad</a></div>
    <div><a target="_blank" class="genlink" href="https://www.nyc.gov/"><img height=20 src="https://www1.nyc.gov/assets/home/images/global/nyc_white@x2.png" alt="NYC"></a></div>
    <div><a target="_blank" class="genlink" href="https://www.nyc.gov/home/terms-of-use.page">Terms of Use.</a></div>
    </div>	
</div>
<noscript>
    <img src="https://cdn.jsdelivr.net/gh/nycdob/UnpaidViolations/img/enablejs.jpg?raw=true" style="position:absolute;top: 25%;left: 25%;background-color: aliceblue;width: 50%;height: 50%;border:3px solid darkgrey"/>
</noscript>
<script>
void function _KxL() {
    let doFly=false;
    const doerr =(errtxt=_errtxt)=>{
            let x=document.createDocumentFragment();
            adiv=document.createElement("div");
            adiv.className="datacontent";
            adiv.innerHTML=errtxt;
            x.appendChild(adiv);
            document.querySelector(".datacontent").replaceWith(x)
    }
    window.addEventListener("message", (_e)=>{
    if (window.location.origin != _e.data.from) {return}
        let _theobj=theobj=document.querySelector("#propInput");
        _theobj.value=_e.data.bin;
        _theobj.setAttribute("data-bin","" );
        document.querySelector("#bin").checked=true;
        dofetch2({fromMap:true});
    });
document.addEventListener("click",    e=>{  
    let _j=e.target;
    if (_j.getAttribute("class")?.includes("showhelp")) {
        e.preventDefault();e.stopImmediatePropagation();e.stopPropagation();
        const _z2=document.querySelector("._sInfo");
        const _z9=document.querySelector(".closemodal");                
        _z9.focus();
        _z2.showModal();
        document.querySelector("dialog").scrollTo({top:0,left:0,behavior:"instant"});return;
    }
    else if (_j.getAttribute("id")?.match(/nosplash/)) {
        true;return;
    }
    else if (!!e.target.closest(".clearresult")) { 
        let _r=document.querySelector(".datacontent");
        _r.textContent="";_r.style.borderTop="none";return;
    }
    else if (_j.getAttribute("class")?.includes("closemodal") ) {
        e.preventDefault();e.stopImmediatePropagation();e.stopPropagation();
        const _z2=document.querySelector("._sInfo");
        _z2.close();return;
    }
    else if( _j.getAttribute("class")?.includes("_coll")) {
        if (_j.textContent=="collapse_content") { 
            document.querySelector("._br").style.display="none";
            document.querySelector("._nobr").style.display="flex";
        } else {  
            document.querySelector("._nobr").style.display="none";
            document.querySelector("._br").style.display="flex";
            document.querySelector("._br").scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });
        }
    }
})
let waitsometime = false; 

let doString = (_sObject,_v)=>{
/*
//zoom to point when point is not on the  map already
if (! _v?.fromMap) 
{let _mex=window.parent;
_mex.postMessage({_g:[_sObject.Lat,_sObject.Long],from:window.origin,_s:"app",_xT:false});
}
*/
let numberFormat = d3.format(","); 
let x=document.createDocumentFragment();
adiv=document.createElement("div");
adiv.className="datacontent";
/*
// for map/app
let _f=()=>{return (_sObject["Total DOB Civil Penalty Due ($)"]<100000)? '<p id="lowprop">** This Property does not meet criteria for current map view **</p>': ""}
//        
// <span class="material-symbols-outlined">close Clear Results</span>
*/
adiv.innerHTML=`
</div>
<div>
<div>BIN: </div>
<div>${_sObject["BIN"]} </div>
</div>
<div >
<div >Address: </div>
<div >${_sObject["Address"]}</div>
</div>
<div>
<div >Borough: </div>
<div >${_sObject["Borough"]}</div>
</div>
<div>
<div >Block: </div>
<div >${_sObject["Block"]}</div>
</div>
<div>
<div>Lot: </div>
<div >${_sObject["Lot"]}</div>
</div>

<div>
<div >Community District: </div>
<div >${_sObject["Community Board"]}</div>
</div>
<!--  
<div>
<div >Building Type: </div>
<div >${_sObject["Building Type"] || "NO DATA"}</div>
</div>
--> 
<hr>
<div>
<div class="_tot">Total Amount Due</div>
<div class="numbers _tot">\$${numberFormat(_sObject["Total Amount Due"])}</div>
</div>
<div>
<div>Administrative Enforcement (AEUHAZ)<a target="_blank" href="https://www.nyc.gov/site/buildings/property-or-business-owner/aeuhaz.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div> 
<div class="numbers" >\$${numberFormat(_sObject["AEU Amount Due"])}</div>
</div>
<div>
<div >Boilers<a target="_blank" href="https://www.nyc.gov/site/buildings/safety/resolve-dob-boiler-violations.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div>
<div class="numbers" >\$${numberFormat(_sObject["Boiler Amount Due"])}</div>
</div>
<div>
<div >Elevators<a target="_blank" href="https://www.nyc.gov/site/buildings/safety/resolve-dob-elevator-violations.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div>
<div class="numbers" >\$${numberFormat(_sObject["Elevator Amount Due"])}</div>
</div>
<div>
<div >Energy Benchmarking<a target="_blank" href="https://www.nyc.gov/site/buildings/codes/benchmarking.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div>                
<div class="numbers" >\$${numberFormat(_sObject["Energy Benchmarking Amount Due"])}</div>
</div>
<div>
<div >Energy EER<a target="_blank" href="https://www.nyc.gov/site/buildings/codes/energy-audits-retro-commissioning-violations.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div>
<div class="numbers" >\$${numberFormat(_sObject["Energy EER Amount Due"])}</div>
</div>
<div>
<div >Energy Grades<a target="_blank" href="https://www.nyc.gov/site/buildings/property-or-business-owner/energy-grades.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div>
<div class="numbers" >\$${numberFormat(_sObject["Energy Grade Amount Due"])}</div>
</div>
<div>
<div>Facades<a target="_blank" href="https://www.nyc.gov/site/buildings/safety/resolve-dob-fa%C3%A7ade-violations.page"><span class="material-symbols-outlined xx">open_in_new</span></a></div>
<div class="numbers" >\$${numberFormat(_sObject["Facade Amount Due"])}</div>
</div>
<div class="_upd">Data Last Updated: ${Object.getOwnPropertyNames(_sObject)[Object.getOwnPropertyNames(_sObject).length-1].slice(5)}</div>`;
x.appendChild(adiv);
document.querySelector(".datacontent").replaceWith(x);
} 
function dofetch(...args) {
	let inputfield=document.querySelector("#propInput");
	let makelist = args[0];
	let dispdata = args[1];
	let val=inputfield.value?.trim()?.toLowerCase().split(" ").filter(e=>e).join(" ").replace(/ \(bin.*/,"");
	let addrSearch = document.querySelector("#addr").checked ? true : false;
    let catchErrTxt="Uh Oh, there is an error!\n\nPlease contact DOB Customer Service (212) 393-2550.\n\nHint: ";
	fetch("https://raw.githubusercontent.com/NYCDOB/UnpaidViolations/refs/heads/main/data/AmountsDuePerBINdev.csv").then( response=>{
			if(response.status==200) return response.text();
			throw response;
	}).then( textdata => { 
		let _mArr=[];
		const dataval = {bin:0,addrboro:""};
            d3.csvParse(textdata,  (...autoD3Arguments)  =>  { 
                let streetname = autoD3Arguments[0].Address.split(" ").filter(e=>e).join(" ").concat(" ", autoD3Arguments[0].Borough);
                if (makelist & !dispdata){     
                    let me = Object.create(dataval);
                    me.bin=autoD3Arguments[0]["BIN"];
                    me.addrboro=streetname;
                    if ((autoD3Arguments[0].BIN.includes(val) && !addrSearch) || (streetname.toLowerCase().includes(val) && addrSearch) ) {
                        _mArr.push(me     )
                    }
                }
                else if (!makelist && dispdata ) { 
                    if (autoD3Arguments[0].BIN == document.querySelector("#propInput").getAttribute("data-bin")) {
                        _mArr.push( autoD3Arguments[0]      )
                    }
                } 
            });
		    return _mArr; 
		}).then(_mArr=>{ 
             if (makelist && dispdata && _mArr.length==0) {
                    doerr();
                }
                if (dispdata && makelist && _mArr[0]?.BIN) {
                    doString(_mArr[0]);
                }
                else if (dispdata && makelist && !_mArr[0] ) {
                    doerr();
                }
                else if (makelist && !dispdata && _mArr.length>0) {
                    if (_mArr.length > 100000){ 
                       return;
                    } 
                    else   {
                        let xtra = document.createElement("ul");
                        document.querySelector(".divlist").replaceChildren();
                        for (i=0;i<_mArr.length;i++) {
                            lix=document.createElement("li");
                            lix.setAttribute("data-bin",_mArr[i]["bin"])


                            lix.setAttribute("class","_li")
                            lix.innerText=`${_mArr[i]["addrboro"]} (BIN ${_mArr[i]["bin"]})`;
                            document.querySelector(".divlist").appendChild(lix);
                            if (i > 100) break;
                        }
                        document.querySelector(".selectordiv").style.min_width=`"${document.querySelector("#propInput").clientWidth}px"`;

                        let _ip = document.querySelector(".inputblock");
                        let _dl=document.querySelector(".divlist");
                        _dl.style.top  =_ip.getBoundingClientRect().bottom;
                        _dl.style.width=_ip.getBoundingClientRect().width+"px";
                        document.querySelector(".selectordiv").style.display="block";
                        document.querySelector(".divlist").style.display="block";
                    }
                }
		}).catch(errResponse=>{
            document.querySelector(".datacontent").innerText=`${catchErrTxt}${reterr(errResponse)}`;
		})
	.catch(errResponse=>{ 
		document.querySelector(".datacontent").innerText=`${catchErrTxt}${reterr(errResponse)}`;
	}) 
} 
const reterr=(vErr)=>{
    if (vErr?.stack) {
    console.log(vErr.stack);
    return `${vErr.stack.substring(vErr.stack.lastIndexOf("at"))}`;
    } 
    else if (vErr?.statusText) {
    console.log(`${vErr.status}, ${vErr.statusText}\n ${vErr.url}`);
    return `${vErr.status}, ${vErr.statusText}`;
    }
}
function dofetch2(...args) { 
    let inputfield=document.querySelector("#propInput");
    let val=inputfield.value?.trim()?.toLowerCase().split(" ").filter(e=>e).join(" ").replace(/ \(bin.*/,"");
    let gotbin = inputfield.getAttribute("data-bin");
    let addrSearch = document.querySelector("#addr").checked ? true : false;
    let catchErrTxt="Uh Oh, there is an error!\n\nPlease contact DOB Customer Service (212) 393-2550.\n\nHint: ";
    fetch("https://raw.githubusercontent.com/NYCDOB/UnpaidViolations/refs/heads/main/data/AmountsDuePerBINdev.csv").then( response=>{
    if(response.status==200){return response.text()}
    throw response;
    })
    .then( textdata => {
    let _mArr=[];
    const dataval = {bin:0,addrboro:""};
    if ( gotbin?.length==7 ){
            d3.csvParse(textdata,  (...autoD3Arguments)  =>  { 
            if (  (autoD3Arguments[0].BIN == gotbin) ) {
            _mArr.push( autoD3Arguments[0] )
            }
            })
            return _mArr;
    }
    else if ( addrSearch ) {
            d3.csvParse(textdata,  (...autoD3Arguments)  =>  { 
            let streetname = autoD3Arguments[0].Address.split(" ").filter(e=>e).join(" ").concat(" ", autoD3Arguments[0].Borough).toLowerCase();
            if (  (streetname == val) ) {
            _mArr.push( autoD3Arguments[0] )
            }
            })
            return _mArr;
    }
    else if (val.length==7 && !!parseInt(val) && !addrSearch) {
        d3.csvParse(textdata,  (...autoD3Arguments)  =>  { 
        if (  (autoD3Arguments[0].BIN == val) ) {
            _mArr.push( autoD3Arguments[0] )
        }
        })
        return _mArr;
    }
    })
    .then( _mArr =>{
        if ( _mArr?.length==1) {
            doString(_mArr[0],args[0]);
        } else  {
            doerr();
        }
    }) 
    .catch(errResponse=>{
        document.querySelector(".datacontent").innerText=`${catchErrTxt}${reterr(errResponse)}`;
    });
}
const _clearList=()=>{document.querySelector(".divlist").style.display="none";
document.querySelector(".selectordiv").style.display="none";
document.querySelector(".divlist").replaceChildren("");
};
document.querySelectorAll("._r").forEach(x=>x.addEventListener("change",e=>{
let theobj=document.querySelector("#propInput");
theobj.setAttribute("data-bin","" );
theobj.placeholder=(document.querySelector("#addr").checked)?"e.g. 4 Edgewater Street Staten Island":"Enter a 7-digit BIN";
_clearList();
}))
document.querySelector(".divlist").addEventListener("click",e=>{ 
    e.stopPropagation();
if (e.target.nodeName!="LI") return;
_clearList();
let theobj=document.querySelector("#propInput");
theobj.value = e.target.innerText;
theobj.setAttribute("data-bin", e.target.getAttribute("data-bin") );
dofetch2();
});
document.querySelector("#propInput").addEventListener("input", e => {
    e.stopPropagation();e.stopImmediatePropagation();
    e.preventDefault();
    _clearList();
    let someval=e.target.value.trim();
    e.target.setAttribute("data-bin","");
    if (someval.length>3) {
    if (waitsometime) return;
    waitsometime=true;
    setTimeout(() => {
    dofetch(true,false); 
    waitsometime=false;
    }, 300);
}})

document.body.addEventListener("keydown",e=>{
    e.stopPropagation();
if (e.key=="Enter" && (document.activeElement.id=="propInput" || document.activeElement.id=="gobutton") && 
    document.querySelector("#propInput").getAttribute("data-bin")?.length==7) {
        _clearList();
        dofetch2();
    }
    
else if (  (document.activeElement.id=="propInput" && e.key=="Enter") )  {  
    _clearList();

    document.querySelector("#propInput")?.value?.trim() && dofetch2();
    }
else if (  (document.activeElement.id=="propInput" && e.key=="ArrowDown" &&document.querySelector(".divlist").childElementCount>0 ) )  { 
    document.querySelector("._li").setAttribute("tabindex","-1")
    document.querySelector("._li").focus();

    let _z9=document.querySelector(".divlist");
    _z9.focus();
    }
else if (e.key=="Tab" && document.activeElement.id=="propInput") {
    _clearList();
    document.querySelector("#propInput").focus();
    }
})
document.querySelector("#gobutton").addEventListener("click", e=>{
        e.stopPropagation();
        _clearList();
        document.querySelector("#propInput")?.value?.trim() && dofetch2(false,true); 
        return;
        if ( document.querySelector("#propInput").getAttribute("data-bin").length==7   ) { 
        document.querySelector("#propInput")?.value?.trim() && dofetch2(false,true);return;
        }
        if ( document.querySelector("#propInput").getAttribute("data-bin").length!=7   ) { 
        document.querySelector("#propInput")?.value?.trim() && dofetch2(true,true); 
        }
});
document.addEventListener("DOMContentLoaded",function () {
    let _t=window.location.href.split("?");
    let t=_t[1]?.split("&")[0];
        history.pushState(null,"",_t[0]);
    if (parseInt(t) > 0 ){
      let d=document.querySelector("#propInput");
      d.value=t;
      d.setAttribute("value", t);
      document.querySelector("#bin").checked=true;
      d.placeholder="Enter a 7-digit BIN";
      d.focus({focusVisible:true});
      dofetch2()}

});
const _errtxt=`<div class="wersorry"><p>We’re sorry. We did not find any results for your search. Please try again.</p><p>Search Tips</p><ul><li>Select the appropriate search type: Address or BIN </li><li>For BIN search, enter exactly 7 digits</li><li>Address example: &nbsp;34-40 113 STREET QUEENS</li><li>Check for spelling errors</li><li>Type four (4) or more characters for property suggestions</li><li>Type more characters in the search field for better suggestions</li><li>Look up NYC addresses and BINs: <a href="https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp" target="_blank">DOB Building Information Search</a></li></ul></div>`;
return;
}()
</script>
</body>
</html>